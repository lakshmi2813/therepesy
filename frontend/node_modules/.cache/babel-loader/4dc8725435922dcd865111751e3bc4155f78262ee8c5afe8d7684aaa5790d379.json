{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: '/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Attach JWT token to every request\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('mgm_token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Handle 401 globally\napi.interceptors.response.use(res => res, err => {\n  var _err$response;\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n    localStorage.removeItem('mgm_token');\n    localStorage.removeItem('mgm_user');\n    window.location.href = '/login';\n  }\n  return Promise.reject(err);\n});\n\n// ── Auth ──\nexport const login = data => api.post('/auth/login', data);\nexport const register = data => api.post('/auth/register', data);\nexport const getMe = () => api.get('/auth/me');\n\n// ── Dashboard ──\nexport const getSupervisorDashboard = () => api.get('/dashboard/supervisor');\nexport const getTherapistDashboard = () => api.get('/dashboard/therapist');\nexport const getPatientDashboard = () => api.get('/dashboard/patient');\n\n// ── Assignments ──\nexport const getAssignments = () => api.get('/assignments');\nexport const getUnassignedPatients = () => api.get('/assignments/unassigned-patients');\nexport const createAssignment = data => api.post('/assignments', data);\nexport const updateAssignment = (id, data) => api.put(`/assignments/${id}`, data);\n\n// ── Patients & Therapists ──\nexport const getPatients = () => api.get('/patients');\nexport const getTherapists = () => api.get('/therapists');\nexport const getPatientById = id => api.get(`/patients/${id}`);\nexport const getTherapistById = id => api.get(`/therapists/${id}`);\n\n// ── Sessions ──\nexport const getSessions = params => api.get('/sessions', {\n  params\n});\nexport const getTodaySessions = () => api.get('/sessions/today');\nexport const createSession = data => api.post('/sessions', data);\nexport const updateSession = (id, d) => api.put(`/sessions/${id}`, d);\n\n// ── Moods ──\nexport const logMood = data => api.post('/moods', data);\nexport const getMoods = () => api.get('/moods');\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","res","err","_err$response","status","removeItem","window","location","href","Promise","reject","login","data","post","register","getMe","get","getSupervisorDashboard","getTherapistDashboard","getPatientDashboard","getAssignments","getUnassignedPatients","createAssignment","updateAssignment","id","put","getPatients","getTherapists","getPatientById","getTherapistById","getSessions","params","getTodaySessions","createSession","updateSession","d","logMood","getMoods"],"sources":["C:/Users/lshri/OneDrive/Desktop/oracle/mgm-hospital/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: '/api',\n  headers: { 'Content-Type': 'application/json' }\n});\n\n// Attach JWT token to every request\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('mgm_token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Handle 401 globally\napi.interceptors.response.use(\n  (res) => res,\n  (err) => {\n    if (err.response?.status === 401) {\n      localStorage.removeItem('mgm_token');\n      localStorage.removeItem('mgm_user');\n      window.location.href = '/login';\n    }\n    return Promise.reject(err);\n  }\n);\n\n// ── Auth ──\nexport const login    = (data) => api.post('/auth/login', data);\nexport const register = (data) => api.post('/auth/register', data);\nexport const getMe    = ()     => api.get('/auth/me');\n\n// ── Dashboard ──\nexport const getSupervisorDashboard = () => api.get('/dashboard/supervisor');\nexport const getTherapistDashboard  = () => api.get('/dashboard/therapist');\nexport const getPatientDashboard    = () => api.get('/dashboard/patient');\n\n// ── Assignments ──\nexport const getAssignments        = ()            => api.get('/assignments');\nexport const getUnassignedPatients = ()            => api.get('/assignments/unassigned-patients');\nexport const createAssignment      = (data)        => api.post('/assignments', data);\nexport const updateAssignment      = (id, data)    => api.put(`/assignments/${id}`, data);\n\n// ── Patients & Therapists ──\nexport const getPatients     = ()   => api.get('/patients');\nexport const getTherapists   = ()   => api.get('/therapists');\nexport const getPatientById  = (id) => api.get(`/patients/${id}`);\nexport const getTherapistById= (id) => api.get(`/therapists/${id}`);\n\n// ── Sessions ──\nexport const getSessions        = (params) => api.get('/sessions', { params });\nexport const getTodaySessions   = ()       => api.get('/sessions/today');\nexport const createSession      = (data)   => api.post('/sessions', data);\nexport const updateSession      = (id, d)  => api.put(`/sessions/${id}`, d);\n\n// ── Moods ──\nexport const logMood  = (data) => api.post('/moods', data);\nexport const getMoods = ()     => api.get('/moods');\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}